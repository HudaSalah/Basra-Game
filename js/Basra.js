$(document).ready(function(){function r(b,a,e,f){var d=$("<div>");d.addClass(b).attr("value",e).css("background-image","url("+a+")");$(f).append(d)}function K(b){for(var d=0;4>d;d++){for(var e=Math.floor(Math.random()*c.length);"jack"==c[e].value;)e=Math.floor(Math.random()*c.length);if("jack"!=c[e].value){var f={name:c[e].name,value:c[e].value};a.push(f);c=c.filter(function(b){return b.name!==f.name});r("Card2",f.name,f.value,".DeckCards");$(b).css("display","none")}}}function L(){for(var b=0;4>
b;b++){var a=Math.floor(Math.random()*c.length),e={name:c[a].name,value:c[a].value};l.push(e);c=c.filter(function(a){return a.name!==e.name});r("Card3",e.name,e.value,".HudaCards");z++}for(b=0;4>b;b++){a=Math.floor(Math.random()*c.length);var f={name:c[a].name,value:c[a].value};m.push(f);c=c.filter(function(a){return a.name!==f.name});r("Card1",f.name,f.value,".PlayerCards");$(".Card1").css("background-image",'url("img/back3.jpg")');z++}}function t(a,d,e,f,n){"true"==a?(l=l.filter(function(a){return a.name!==
f}),$(n).remove(),A++,H+=d-e,B=H+A):(m=m.filter(function(a){return a.name!==f}),$(".Card1").eq(n).remove(),C++,I+=d-e,D=I+C);return[B,D]}function v(a){"true"==a?(w+=1,$(".Player2WinCards p:nth-child(3) span").html(w).css("color","#00ff57"),$(".HudaCards audio").attr("src","src/kisses.mp3")):(x+=1,$(".PlayerWinCards p:nth-child(3) span").html(x).css("color","#00ff57"),$(".PlayerCards audio").attr("src","src/hmm.mp3"))}function M(a,d){d=parseInt(d);a.sort(function(a,b){return a.value>b.value?1:b.value>
a.value?-1:0});for(var e=[],b=0;b<a.length;b++)for(var n=parseInt(a[b].value),k=b+1;k<a.length;k++){var h=parseInt(a[k].value),c=n+h;c==d&&e.push([n,h]);for(var g=[n,h],m=k+1,l=m;l<a.length;l++)c+parseInt(a[l].value)<=d&&(c+=parseInt(a[l].value),g.push(parseInt(a[l].value)));c!=d?(g=[n,h],c=n+h):(e.push(g),m++)}return e=e.map(JSON.stringify).reverse().filter(function(a,b,e){return-1===e.indexOf(a,b+1)}).reverse().map(JSON.parse)}function N(b){for(var d=b[Math.floor(Math.random()*b.length)],e=0;e<
d.length;e++){b=a.findIndex(function(a){return a.value==d[e]});var f=a[b].name;a.splice(b,1);$(".Card2[style*='"+f+"']").remove()}return a}function J(b,d,e,f,c){if(0==a.length){var k={name:d,value:b};a.push(k);r("Card2",k.name,k.value,".DeckCards");"true"==c?(l=l.filter(function(a){return a.name!==d}),$(f).remove(),"jack"==b&&$(".HudaCards audio").attr("src","src/shit.mp3")):(m=m.filter(function(a){return a.name!==d}),$(".Card1").eq(f).remove())}else if(1==a.length)if(b==a[0].value||"cards/7_of_diamonds.jpg"==
d){a=[];$(".Card2").remove();var h=a.length;h=t(c,e,h,d,f);v(c)}else"jack"==b?($(".Card2").remove(),a=[],h=a.length,h=t(c,e,h,d,f)):(k={name:d,value:b},a.push(k),r("Card2",k.name,k.value,".DeckCards"),"true"==c?($(f).remove(),l=l.filter(function(a){return a.name!==d})):(m=m.filter(function(a){return a.name!==d}),$(".Card1").eq(f).remove()));else if(1<a.length){for(var n=0,g=0;g<a.length;g++)n+=parseInt(a[g].value);if(b==n||"cards/7_of_diamonds.jpg"==d&&10>=n)$(".PlayerCards audio").attr("src","src/chipsHandle5.mp3"),
a=[],$(".Card2").remove(),v(c),h=t(c,e,0,d,f);else if("jack"==b||"cards/7_of_diamonds.jpg"==d)$(".PlayerCards audio").attr("src","src/chipsHandle5.mp3"),$(".Card2").remove(),a=[],h=a.length,h=t(c,e,h,d,f);else{n=k=!1;for(g=0;g<a.length;g++)b==a[g].value&&(n=k=!0,a=a.filter(function(b){return b.value!==a[g].value}),$(".Card2[value= '"+b+"']").remove(),h=a.length,h=t(c,e,h,d,f));e=[];for(g=0;g<a.length;g++)if("jack"==a[g].value||"queen"==a[g].value||"king"==a[g].value)e.push(a[g]),a=a.filter(function(b){return b.name!=
a[g].name}),g--;var p=a.length;for(g=0;g<a.length;g++){var q=M(a,b);if(0!=q.length)k=!0,a=N(q),h=a.length,1==n&&("true"==c?A--:C--),h=t(c,p,h,d,f);else{if(0!=e.length){for(g=0;g<e.length;g++)a.push(e[g]);e=[]}0==a.length&&v(c);break}if(0!=e.length)for(g=0;g<e.length;g++)a.push(e[g]);0==a.length&&v(c)}}0==k&&(console.log("here mfi4 7aga mwgoda zai l card 'zwdha ' "),k={name:d,value:b},console.log(k),a.push(k),r("Card2",k.name,k.value,".DeckCards"),"true"==c?($(f).remove(),l=l.filter(function(a){return a.name!==
d})):(m=m.filter(function(a){return a.name!==d}),$(".Card1").eq(f).remove()))}return h}function O(a,c){debugger;$(".Card1").eq(a).css("background-image","url("+c+")")}$(".TheWinner").css("display","none");var u=localStorage.getItem("storageName").toUpperCase();console.log(u);for(var z=0,E=0,x=0,I=0,C=0,D=0,w=0,H=0,A=0,B=0,c=[],a=[],m=[],l=[],y=["clubs","diamonds","hearts","spades"],F=["king","queen","jack"],p=1;11>p;p++)for(var q=0;q<y.length;q++){var G={name:"cards/"+p+"_of_"+y[q]+".jpg",value:p};
c.push(G)}for(p=0;p<F.length;p++)for(q=0;q<y.length;q++)G={name:"cards/"+F[p]+"_of_"+y[q]+".jpg",value:F[p]},c.push(G);console.log(c);$("#StartGame").on("click",function(){$("#PlayAgain").css("display","inline");$("#PlayersCards").css("display","inline");K(this)});$("#PlayersCards").on("click",function(){$(".PlayerWinCards , .Player2WinCards").css("color","#ffee19");$(".PlayerWinCards p:first-child span").html("Computer").css("color","#005096");0==l.length&&0==m.length&&($("audio").attr("src","src/zapsplat_leisure_card_game_in_box_shake.mp3"),
$(".Card1").remove(),$(".Card3").remove(),E++,$(".RoundNum p:first-child span").html(E),$(".RoundNum p:nth-child(2) span").html(u),$(".Player2WinCards p:first-child span").html(u).css("color","#005096"),L(),48==z&&$(this).attr("src","img/joker2.jpg"),$(".Card3").on("click",function(b){$(".HudaCards audio").attr("src","src/cardPlace2.mp3");$(".RoundNum p:nth-child(2) span").html("Computer");$(".PlayerWinCards").css("background","#f0a7c2ab").css("transition","2s");$(".Player2WinCards").css("background",
"#4e8b8cab").css("transition","2s");b=$(this).attr("value");var c="cards/"+$(this).css("background-image").split("/").pop().replace(/"|'|\)/g,""),e=a.length;l.length==m.length&&(b=J(b,c,e,this,"true"),"undefined"!==typeof b&&(b=b[0],$(".Player2WinCards p:nth-child(2) span").html(b)),setTimeout(function(){var b=Math.floor(Math.random()*m.length),c=m[b].value,e=m[b].name;O(b,e);setTimeout(function(){var d=a.length;$(".PlayerCards audio").attr("src","src/cardSlide8.mp3");d=J(c,e,d,b,"false");$(".Card1").animate({opacity:"0.6"});
"undefined"!==typeof d&&(d=d[1],$(".PlayerWinCards p:nth-child(2) span").html(d));if(6==E&&0==l.length&&0==m.length){$(".Card2").remove();d=10*w+(B-w);var f=10*x+(D-x);$(".TheWinner").css("display","flex");d>f?($(".classFlex audio").attr("src","src/Winning-sound-effect.mp3"),$(".TheWinner h2").html("Congratulations .."),$(".TheWinner h3").html("You Are The Winner "+u+"^_^"),$(".TheWinner p ").html("TotalScore You Have IS : "+d)):($(".classFlex audio").attr("src","src/aauuu.mp3"),$(".TheWinner h2").html("Game Over >_<"+
u),$(".TheWinner h3").html(" You Can Try Again IF You Wish"),$(".TheWinner p ").html("TotalScore OF Computer IS : "+f))}$(".RoundNum p:nth-child(2) span").html(u);$(".Player2WinCards").css("background","#f0a7c2ab").css("transition","2s").css("color","#ff004c");$(".PlayerWinCards").css("background","#4e8b8cab").css("transition","2s")},1E3)},1500),$(".Card1").animate({opacity:"1"}))}))})});